<script>
  $(document).ready(function() {
    // catch paste event, if image, the stick in the idata hidden
    // element and generate a submit event.. need to iterate over
    // the clipboardData.items and find any images inside..
    $('#pastebox').bind('paste', function(e) {
      $('#pastebox').val("");
      d = e.originalEvent.clipboardData.items;
      for (n=0; n < d.length; n++) {
        console.log(d[n].type);
        if (/image\/.*/.test(d[n].type)) {
          var data = d[n].getAsFile();
          var fr = new FileReader;
          fr.onloadend = function() {
            $('#idata').val(fr.result);
            $('#paste').submit();
          };
          fr.readAsDataURL(data);
        }
      }
    });
  });
</script>

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">
	<img style="max-height:20px; vertical-align: middle;"
	     src="/assets/elog.png"></a>
    </div>

    <ul class="nav navbar-nav">
      <li>
	<button type="button" class="btn btn-default navbar-btn">
	  <a href="/"><span class="glyphicon glyphicon-home"> Home</span></a>
	</button>
      </li>
      <li>
	<button type="button" class="btn btn-default navbar-btn">
	  <a href="/report/pick">Reports</a>
	</button>
      </li>
      <li>
	<button type="button" class="btn btn-default navbar-btn">
	  <a href="/about">About</a>
	</button>
      </li>
      <li>
	<button type="button" class="btn btn-default navbar-btn">
	  <a href="/logout">Logout</a>
	</button>
      </li>


      <li>
	<form id="paste" class="navbar-form" role="search" method="post" action="/paste">
	  <div class="form-group">
	    <input id="idata" name="idata" value="" type="hidden">
	    <input id="pastebox" name="pastebox"
		   type="text" class="form-control"
		   style="background-color: lightgreen;"
		   placeholder="paste images here">
	  </div>
	  <button type="button" class="btn btn-default">
	    <a href="/attachments/showlist">Attachments</a>
	  </button>
	</form>
      </li>

      <li>
	<form id="search" class="navbar-form" role="search" method="post" action="/search">
	  <div class="form-group">
            <input type="text" class="form-control" 
		   placeholder="exper, date, text" name="pattern">
	  </div>
	  <button type="submit" class="btn btn-default">Search</button>
	</form>
      </li>

    </ul>
    <p class="navbar-text navbar-right">{{("uri:%s" % request.path)|blue|safe}}</p>
  </div>
</nav>

